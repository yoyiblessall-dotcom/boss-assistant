<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Liquid Intelligence OS</title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
<style>
  :root {
    --text-primary: #ffffff;
    --glass-bg: rgba(255, 255, 255, 0.05);
    --glass-border: rgba(255, 255, 255, 0.2);
    --glass-highlight: rgba(255, 255, 255, 0.5);
  }

  body {
    margin: 0; padding: 0;
    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", Roboto, sans-serif;
    background-color: #000;
    color: var(--text-primary);
    height: 100vh; width: 100vw;
    display: flex; flex-direction: column;
    overflow: hidden;
  }

  /* â˜…â˜…â˜… æ ¸å¿ƒï¼šæµé«”å‹•æ…‹èƒŒæ™¯ (Mesh Gradient Animation) â˜…â˜…â˜… */
  .liquid-bg {
    position: absolute; inset: 0;
    background: #0f0c29; /* åº•è‰² */
    overflow: hidden;
    z-index: -2;
  }

  /* å‰µé€ å¤šå€‹æµå‹•çš„å…‰çƒ */
  .orb {
    position: absolute;
    border-radius: 50%;
    filter: blur(80px); /* æ¥µè‡´æ¨¡ç³Šï¼Œå‰µé€ èåˆæ„Ÿ */
    opacity: 0.6;
    animation: float 20s infinite ease-in-out;
  }

  /* å®šç¾©ä¸åŒé¡è‰²çš„å…‰çƒ */
  .orb-1 { width: 600px; height: 600px; background: #302b63; top: -100px; left: -100px; animation-delay: 0s; }
  .orb-2 { width: 500px; height: 500px; background: #24243e; bottom: -100px; right: -100px; animation-delay: -5s; }
  .orb-3 { width: 400px; height: 400px; background: #8e2de2; top: 40%; left: 40%; transform: translate(-50%, -50%); animation-delay: -10s; opacity: 0.4; }
  
  /* å‹•æ…‹æ›´æ›é¡è‰²ä¸»é¡Œçš„é®ç½© */
  .color-overlay {
    position: absolute; inset: 0;
    background: transparent;
    transition: background 1.5s ease; /* é¡è‰²åˆ‡æ›æ™‚çš„å¹³æ»‘éæ¸¡ */
    z-index: -1;
    mix-blend-mode: overlay; /* æ··åˆæ¨¡å¼è®“é¡è‰²æ›´æ·±é‚ƒ */
  }

  /* è®“èƒŒæ™¯å‹•èµ·ä¾† */
  @keyframes float {
    0% { transform: translate(0, 0) scale(1); }
    33% { transform: translate(30px, -50px) scale(1.1); }
    66% { transform: translate(-20px, 20px) scale(0.9); }
    100% { transform: translate(0, 0) scale(1); }
  }

  /* å™ªé»å±¤ (å¢åŠ è³ªæ„Ÿ) */
  .noise-layer {
    position: absolute; inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.04'/%3E%3C/svg%3E");
    pointer-events: none; z-index: -1;
  }

  /* é ‚éƒ¨å°èˆª */
  .top-nav {
    flex: 0 0 auto; padding: 20px 24px;
    display: flex; justify-content: space-between; align-items: center;
    z-index: 10;
  }
  .brand-title { 
    font-weight: 800; font-size: 22px; letter-spacing: -0.5px; 
    background: linear-gradient(to right, #fff, #ccc);
    -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    text-shadow: 0 10px 20px rgba(0,0,0,0.5);
  }
  
  .capsule-btn {
    background: rgba(255,255,255,0.1); border: 1px solid var(--glass-border);
    color: white; text-decoration: none; padding: 8px 16px; border-radius: 30px;
    font-size: 12px; display: none; align-items: center; gap: 8px; 
    backdrop-filter: blur(20px); transition: 0.3s; font-weight: 600;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
  }
  .capsule-btn:active { transform: scale(0.95); background: rgba(255,255,255,0.2); }

  /* èŠå¤©è¦–çª— */
  .chat-viewport {
    flex: 1; overflow-y: auto; padding: 20px; padding-bottom: 20px;
    display: flex; flex-direction: column; gap: 24px;
    mask-image: linear-gradient(to bottom, transparent 0%, black 60px);
    -webkit-mask-image: linear-gradient(to bottom, transparent 0%, black 60px);
    scroll-behavior: smooth;
  }
  .chat-viewport::-webkit-scrollbar { display: none; }

  /* è¨Šæ¯æ°£æ³¡ - æ¶²æ…‹ç»ç’ƒæ„Ÿ */
  .message { max-width: 85%; display: flex; flex-direction: column; animation: popIn 0.5s cubic-bezier(0.19, 1, 0.22, 1); }
  .message.bot { align-self: flex-start; }
  .message.user { align-self: flex-end; align-items: flex-end; }

  .bubble {
    padding: 16px 22px; border-radius: 26px; font-size: 15px; line-height: 1.6;
    backdrop-filter: blur(25px); position: relative;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    border: 1px solid var(--glass-border);
  }
  
  /* æ©Ÿå™¨äººï¼šæ¥µè‡´çš„ç»ç’ƒè³ªæ„Ÿ */
  .bot .bubble { 
    background: rgba(255, 255, 255, 0.08); 
    border-bottom-left-radius: 4px;
    border-top: 1px solid var(--glass-highlight); /* é ‚éƒ¨é«˜å…‰ */
  }
  /* ç”¨æˆ¶ï¼šç™¼å…‰çš„é«˜ç§‘æŠ€æ„Ÿ */
  .user .bubble { 
    background: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(200,200,200,0.8));
    color: black; 
    border-bottom-right-radius: 4px; 
    font-weight: 600;
    box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
  }

  /* åº•éƒ¨ Dock */
  .bottom-dock {
    flex: 0 0 auto;
    /* åº•éƒ¨æ¼¸å±¤ï¼Œè®“è¼¸å…¥æ¡†æµ®èµ·ä¾† */
    background: radial-gradient(ellipse at bottom, rgba(0,0,0,0.8) 0%, transparent 70%);
    padding: 10px 0 30px 0;
    display: flex; flex-direction: column; gap: 15px;
    z-index: 20;
  }

  .quick-actions-bar {
    display: flex; gap: 12px; overflow-x: auto; padding: 5px 24px;
    scrollbar-width: none; -webkit-overflow-scrolling: touch;
  }
  .quick-actions-bar::-webkit-scrollbar { display: none; }

  .action-chip {
    flex: 0 0 auto; padding: 10px 20px; border-radius: 30px;
    background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.15);
    color: white; font-size: 13px; cursor: pointer; white-space: nowrap; font-weight: 500;
    backdrop-filter: blur(15px); transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
  }
  .action-chip:hover { background: rgba(255,255,255,0.2); transform: translateY(-3px); box-shadow: 0 10px 20px rgba(0,0,0,0.2); }
  .action-chip:active { transform: scale(0.95); }

  /* è®Šå½¢è¼¸å…¥æ¡† (Morphing Input) */
  .input-wrapper {
    margin: 0 24px;
    background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(40px);
    border-radius: 40px; padding: 8px 8px 8px 24px;
    display: flex; align-items: center; 
    border: 1px solid rgba(255,255,255,0.2);
    box-shadow: 0 10px 40px rgba(0,0,0,0.3);
    transition: 0.3s ease;
  }
  .input-wrapper:focus-within {
    background: rgba(255, 255, 255, 0.15);
    border-color: rgba(255,255,255,0.5);
    box-shadow: 0 0 30px rgba(255,255,255,0.1);
  }

  .text-input { flex: 1; background: transparent; border: none; color: white; font-size: 16px; height: 36px; outline: none; font-weight: 500; }
  .text-input::placeholder { color: rgba(255,255,255,0.5); }
  
  .send-btn {
    width: 44px; height: 44px; border-radius: 50%; border: none;
    background: white; color: black; display: flex; align-items: center; justify-content: center; cursor: pointer;
    transition: 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
  }
  .send-btn:hover { transform: rotate(90deg) scale(1.1); }
  .send-btn:active { transform: scale(0.9); }

  /* è¼‰å…¥å‹•ç•« - å‘¼å¸ç‡ˆ */
  .system-overlay {
    position: fixed; inset: 0; background: #000; z-index: 9999;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    transition: opacity 0.8s;
  }
  .breathing-logo {
    width: 60px; height: 60px; background: white; border-radius: 50%;
    animation: breathe 2s infinite ease-in-out;
    box-shadow: 0 0 50px rgba(255,255,255,0.5);
  }
  
  @keyframes popIn { from { opacity: 0; transform: scale(0.9) translateY(20px); } to { opacity: 1; transform: scale(1) translateY(0); } }
  @keyframes breathe { 0%, 100% { transform: scale(0.9); opacity: 0.8; } 50% { transform: scale(1.1); opacity: 1; box-shadow: 0 0 80px rgba(255,255,255,0.8); } }

  #demoControls { position: fixed; top: 70px; left: 24px; opacity: 0; pointer-events: none; transition: 0.3s; z-index: 50;}
  #demoControls.show { opacity: 1; pointer-events: auto; }
  .industry-select {
    padding: 10px 16px; border-radius: 20px; background: rgba(255,255,255,0.1); 
    backdrop-filter: blur(20px); color: white; border: 1px solid rgba(255,255,255,0.3);
    font-size: 14px; outline: none; appearance: none; cursor: pointer;
    font-weight: 600;
  }
  .industry-select option { background: #222; color: white; }
</style>
</head>
<body>

<!-- æµé«”å‹•æ…‹èƒŒæ™¯ -->
<div class="liquid-bg">
  <div class="color-overlay" id="themeOverlay"></div>
  <div class="orb orb-1"></div>
  <div class="orb orb-2"></div>
  <div class="orb orb-3"></div>
  <div class="noise-layer"></div>
</div>

<div class="system-overlay" id="loadingLayer">
  <div class="breathing-logo"></div>
  <p style="margin-top:30px; font-size:12px; color:rgba(255,255,255,0.5); letter-spacing: 3px; font-weight:600;">AWAKENING</p>
</div>

<div class="top-nav">
  <div class="brand-title" id="brandTitle">Loading...</div>
  <div style="display:flex; gap:8px;">
    <a href="#" class="capsule-btn" id="btnPhone"><i class="fas fa-phone"></i> CALL</a>
    <a href="#" class="capsule-btn" id="btnLine"><i class="fab fa-line"></i> LINE</a>
  </div>
</div>

<div id="demoControls">
  <select class="industry-select" onchange="manualSwitch(this.value)">
    <option value="pc_repair">é›»è…¦ç¶­ä¿®</option>
    <option value="restaurant">é¤é£²ç¾é£Ÿ</option>
    <option value="beauty">ç¾å®¹ç¾é«®</option>
    <option value="real_estate">æˆ¿ç”¢é¡§å•</option>
    <option value="gym">å¥èº«æ•™ç·´</option>
    <option value="car">æ±½è»Šä¿ä¿®</option>
    <option value="shop">ç¶²æ‹å®¢æœ</option>
    <option value="clinic">è¨ºæ‰€æ›è™Ÿ</option>
    <option value="plumbing">æ°´é›»ç¶­ä¿®</option>
    <option value="tutor">è£œç¿’ç­</option>
  </select>
</div>

<div class="chat-viewport" id="chatBody"></div>

<div class="bottom-dock">
  <div class="quick-actions-bar" id="quickActions"></div>
  <div class="input-wrapper">
    <input type="text" class="text-input" id="userInput" placeholder="Ask anything..." autocomplete="off">
    <button class="send-btn" onclick="handleSend()"><i class="fas fa-arrow-up"></i></button>
  </div>
</div>

<script>
// ğŸ”´ ä½ çš„ GAS API ğŸ”´
const API_URL = "https://script.google.com/macros/s/AKfycbz7IJ4YuR2GkR5m61Z8l2TZoqtIy9g7r-YPB1Xx_31gZhkhvZ01N8LTux5jqIzULXdvXw/exec"; 

const urlParams = new URLSearchParams(window.location.search);
const CLIENT_ID = urlParams.get('id');

// â˜…â˜…â˜… æ ¸å¿ƒç¾å­¸ï¼šå®šç¾©æ¯å€‹è¡Œæ¥­çš„ã€Œæ°›åœè‰²ã€ (Atmosphere Colors) â˜…â˜…â˜…
// ä½¿ç”¨ rgba ç–ŠåŠ ï¼Œè®“èƒŒå¾Œçš„æµå‹•å…‰çƒç”¢ç”Ÿä¸åŒçš„è‰²èª¿è®ŠåŒ–
const industries = {
  pc_repair: { 
    name: "Tech Support", 
    color: "linear-gradient(to bottom right, rgba(15, 32, 39, 0.9), rgba(32, 58, 67, 0.8))", // Deep Tech Blue
    welcome: "ç³»çµ±æª¢æ¸¬ä¸­... æ‚¨çš„é›»è…¦é‡åˆ°ä»€éº¼ç‹€æ³ï¼Ÿ", 
    faqs: [{q:"é–‹ä¸äº†æ©Ÿ",a:"è«‹æª¢æŸ¥é›»æº..."}, {q:"é›»è…¦è®Šæ…¢",a:"å»ºè­°æ¸…ç†ç£ç¢Ÿ"}, {q:"ä¸­æ¯’",a:"è«‹ç«‹å³æ–·ç¶²"}] 
  },
  restaurant: { 
    name: "Fine Dining", 
    color: "linear-gradient(to bottom right, rgba(75, 18, 8, 0.8), rgba(164, 69, 45, 0.6))", // Warm Ember
    welcome: "æ­¡è¿å…‰è‡¨ï¼Œç‚ºæ‚¨å®‰æ’ç¾å¥½çš„ä¸€é¤ã€‚", 
    faqs: [{q:"æˆ‘è¦è¨‚ä½",a:"è«‹å‘ŠçŸ¥äººæ•¸..."}, {q:"æœ¬æ—¥æ¨è–¦",a:"ä»Šæ—¥ä¸»å»šæ¨è–¦ï¼šæ¾éœ²ç‡‰é£¯"}] 
  },
  beauty: { 
    name: "Vogue Salon", 
    color: "linear-gradient(to bottom right, rgba(46, 15, 41, 0.8), rgba(138, 59, 118, 0.6))", // Royal Magenta
    welcome: "æƒ³æ›å€‹æ–°é€ å‹å—ï¼Ÿ", 
    faqs: [{q:"é ç´„å‰ªé«®",a:"æƒ³é ç´„å“ªä½è¨­è¨ˆå¸«ï¼Ÿ"}, {q:"åƒ¹ç›®è¡¨",a:"æ´—å‰ª 800 å…ƒèµ·ã€‚"}] 
  },
  real_estate: { 
    name: "Luxury Estate", 
    color: "linear-gradient(to bottom right, rgba(35, 37, 38, 0.9), rgba(65, 67, 69, 0.8))", // Slate Gold
    welcome: "ç‚ºæ‚¨å°‹æ‰¾å¤¢æƒ³å®¶åœ’ã€‚", 
    faqs: [{q:"æœ€æ–°ç‰©ä»¶",a:"å¸‚ä¸­å¿ƒæœ‰å¹¾é–“..."}, {q:"é ç´„çœ‹æˆ¿",a:"è«‹ç•™ä¸‹è¯çµ¡æ–¹å¼"}] 
  },
  gym: { 
    name: "Iron Gym", 
    color: "linear-gradient(to bottom right, rgba(0, 0, 0, 0.9), rgba(23, 77, 43, 0.7))", // Neon Carbon
    welcome: "æº–å‚™å¥½æµæ±—äº†å—ï¼Ÿ", 
    faqs: [{q:"æœƒç±è²»ç”¨",a:"æœˆè²» 988 å…ƒèµ·"}, {q:"ç§äººæ•™ç·´",a:"é«”é©—èª²ç¨‹å„ªæƒ ä¸­"}] 
  },
  car: { 
    name: "Auto Service", 
    color: "linear-gradient(to bottom right, rgba(20, 30, 48, 0.9), rgba(36, 59, 85, 0.8))", // Gunmetal
    welcome: "è»Šå­æœ‰ç•°éŸ³ï¼Ÿè©²ä¿é¤Šäº†ï¼Ÿ", 
    faqs: [{q:"é ç´„ä¿é¤Š",a:"æ¯5000å…¬é‡Œ..."}, {q:"é“è·¯æ•‘æ´",a:"è«‹æ’¥æ‰“..."}] 
  },
  shop: { 
    name: "Boutique", 
    color: "linear-gradient(to bottom right, rgba(97, 30, 30, 0.8), rgba(196, 104, 90, 0.6))", // Coral Pink
    welcome: "æ‚¨å¥½ï¼é—œæ–¼è¨‚å–®æˆ–é€€æ›è²¨ï¼Ÿ", 
    faqs: [{q:"è¨‚å–®æŸ¥è©¢",a:"è«‹æä¾›ç·¨è™Ÿ"}, {q:"é€€æ›è²¨",a:"ä¸ƒå¤©å…§å¯é€€æ›"}] 
  },
  clinic: { 
    name: "Medical Center", 
    color: "linear-gradient(to bottom right, rgba(15, 46, 46, 0.8), rgba(48, 126, 126, 0.7))", // Clean Teal
    welcome: "æ—©å®‰ï¼Œéœ€è¦æ›è™Ÿæˆ–è«®è©¢å—ï¼Ÿ", 
    faqs: [{q:"é–€è¨ºæ™‚é–“",a:"æ—©è¨º 9:00 - 12:00"}, {q:"é ç´„æ›è™Ÿ",a:"è«‹æä¾›èº«åˆ†è­‰"}] 
  },
  plumbing: { 
    name: "Pro Fix", 
    color: "linear-gradient(to bottom right, rgba(0, 31, 63, 0.9), rgba(0, 64, 128, 0.7))", // Deep Ocean
    welcome: "å“ªè£¡æ¼æ°´äº†ï¼Ÿæˆ‘å€‘é¦¬ä¸Šè™•ç†ã€‚", 
    faqs: [{q:"é¦¬æ¡¶ä¸é€š",a:"å¯å”åŠ©ç–é€š"}, {q:"æ›´æ›æ°´é¾é ­",a:"å¤šç¨®æ¬¾å¼å¯é¸"}] 
  },
  tutor: { 
    name: "Study Center", 
    color: "linear-gradient(to bottom right, rgba(26, 26, 46, 0.9), rgba(15, 52, 96, 0.8))", // Wisdom Indigo
    welcome: "æƒ³äº†è§£ä»€éº¼èª²ç¨‹ï¼Ÿ", 
    faqs: [{q:"èª²ç¨‹è©¦è½",a:"æ­¡è¿é ç´„"}, {q:"æ”¶è²»æ–¹å¼",a:"è«‹æ´½æ«ƒå°"}] 
  }
};

let currentKey = "pc_repair";
let currentData = industries.pc_repair;

async function init() {
  if (!CLIENT_ID) {
    document.querySelector('#loadingLayer p').innerText = "DEMO MODE";
    setTimeout(() => {
      document.getElementById("loadingLayer").style.opacity = 0;
      setTimeout(()=> document.getElementById("loadingLayer").style.display = "none", 800);
      document.getElementById("demoControls").classList.add("show");
      
      manualSwitch('beauty'); 
    }, 1200);
    return;
  }

  try {
    const res = await fetch(`${API_URL}?action=check_auth&client_id=${CLIENT_ID}`);
    const data = await res.json();

    if (data.status === 'error' || data.status === 'expired') {
      document.querySelector('#loadingLayer p').innerText = "ACCESS DENIED";
      return;
    }

    if(data.phone) {
      const btn = document.getElementById("btnPhone");
      btn.href = `tel:${data.phone}`; btn.style.display = "flex";
    }
    if(data.line) {
      const btn = document.getElementById("btnLine");
      btn.href = data.line; btn.style.display = "flex";
    }

    if (data.industry && industries[data.industry]) {
      currentKey = data.industry;
      if (data.shop_name) industries[currentKey].name = data.shop_name;
      if (data.custom_qa) industries[currentKey].faqs = data.custom_qa;
    }

    updateUI(true);

    setTimeout(() => {
      document.getElementById("loadingLayer").style.opacity = 0;
      setTimeout(()=> document.getElementById("loadingLayer").style.display = "none", 800);
    }, 1000);

  } catch (e) {
    document.querySelector('#loadingLayer p').innerText = "CONNECTION ERROR";
  }
}

function manualSwitch(key) {
  currentKey = key;
  updateUI(false);
}

function updateUI(isFirstLoad) {
  currentData = industries[currentKey];
  
  // â˜…â˜…â˜… åˆ‡æ›æ°›åœè‰² â˜…â˜…â˜…
  const themeOverlay = document.getElementById("themeOverlay");
  themeOverlay.style.background = currentData.color || "rgba(0,0,0,0.8)";

  document.getElementById("brandTitle").innerText = currentData.name;
  document.title = currentData.name;

  const chatBody = document.getElementById("chatBody");
  if(!isFirstLoad) chatBody.innerHTML = "";
  
  if (chatBody.children.length === 0) {
    addBotMsg(currentData.welcome);
  }

  updateQuickMenu(currentData.faqs);
}

function updateQuickMenu(faqs) {
  const menu = document.getElementById("quickActions");
  menu.innerHTML = "";
  faqs.forEach(item => {
    const btn = document.createElement("button");
    btn.className = "action-chip";
    btn.innerText = item.q;
    btn.onclick = () => handleChipClick(item.q, item.a);
    menu.appendChild(btn);
  });
}

function handleChipClick(q, a) {
  addUserMsg(q);
  showTyping();
  setTimeout(() => {
    hideTyping();
    addBotMsg(a);
  }, 600);
}

function handleSend() {
  const input = document.getElementById("userInput");
  const text = input.value.trim();
  if(!text) return;

  addUserMsg(text);
  input.value = "";
  showTyping();

  let ans = "å¦‚éœ€è©³ç´°æœå‹™ï¼Œè«‹é»æ“Šä¸Šæ–¹è¯çµ¡æŒ‰éˆ•ã€‚";
  for(let f of currentData.faqs) {
    if(text.includes(f.q)) ans = f.a;
  }

  setTimeout(() => {
    hideTyping();
    addBotMsg(ans);
  }, 800);

  if (CLIENT_ID) {
    fetch(API_URL, {
      method: 'POST', mode: 'no-cors',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify({ action: 'log_chat', client_id: CLIENT_ID, type: 'user', message: text })
    });
  }
}

function addBotMsg(text) {
  const chatBody = document.getElementById("chatBody");
  const div = document.createElement("div");
  div.className = "message bot";
  div.innerHTML = `<div class="bubble">${text}</div>`;
  chatBody.appendChild(div);
  scrollToBottom();
  
  if (CLIENT_ID) {
     fetch(API_URL, {
      method: 'POST', mode: 'no-cors',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify({ action: 'log_chat', client_id: CLIENT_ID, type: 'bot', message: text })
    });
  }
}

function addUserMsg(text) {
  const chatBody = document.getElementById("chatBody");
  const div = document.createElement("div");
  div.className = "message user";
  div.innerHTML = `<div class="bubble">${text}</div>`;
  chatBody.appendChild(div);
  scrollToBottom();
}

function showTyping() {
  const chatBody = document.getElementById("chatBody");
  const div = document.createElement("div");
  div.id = "typingIndicator";
  div.className = "message bot";
  div.innerHTML = `<div class="bubble" style="color:rgba(255,255,255,0.7); font-size:12px;">â— â— â—</div>`;
  chatBody.appendChild(div);
  scrollToBottom();
}

function hideTyping() {
  const el = document.getElementById("typingIndicator");
  if(el) el.remove();
}

function scrollToBottom() {
  const chatBody = document.getElementById("chatBody");
  chatBody.scrollTop = chatBody.scrollHeight;
}

document.getElementById("userInput").addEventListener("keypress", (e) => {
  if(e.key==="Enter") handleSend();
});

init();

</script>
</body>
</html>